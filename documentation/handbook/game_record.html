<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML><HEAD>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>



<TITLE>Volity Wiki: Game Record</TITLE>
<META NAME='KEYWORDS' CONTENT='Game_Record'/>
<LINK REL="stylesheet" HREF="/web/20070301123245cs_/http://www.volity.org/main.css">
</HEAD><BODY BGCOLOR="white">


<div class=wikiheader><h1><a href="back.html=Game+Record">Game Record</a></h1><a href="homepage.html" class=wikipagelink>HomePage</a> | <a href="recentchanges.html" class=wikipagelink>RecentChanges</a> | <a href="action.html=editprefs">Preferences</a> | <a href="action.html=upload">Upload</a><br>
<hr class=wikilineheader></div><div class=wikitext>When a <a href="game.html" class=wikipagelink>game</a> ends, the <a href="referee.html" class=wikipagelink>referee</a> creates a <strong>game record</strong>, an information structure containing a summary of the game and its outcome. Unless the <a href="table.html" class=wikipagelink>table</a> has been <a href="table_configuration.html" class=wikipagelink>configured</a> not to do so, the referee then sends this record to the <a href="bookkeeper.html" class=wikipagelink>bookkeeper</a>, which stores it permanently, updating the different <a href="player.html" class=wikipagelink>player</a>s' <a href="elo_score.html" class=wikipagelink>ELO score</a>s for the game's <a href="ruleset.html" class=wikipagelink>ruleset</a>.
<p>
<H2>Game record structure</H2>

<p>
A game record takes the shape of an <a href="xml.html-RPC" class=wikipagelink>XML-RPC</a> struct, and contains the following keys:
<p>
<H3>Required values</H3>

<p>
<DL >
<dt>end_time<dd> The time at which this game ended, expressed in one of the <a href="/web/20070301123245/http://www.w3.org/TR/NOTE-datetime">[W3 standard date and time formats]</a>, e.g. 2006-07-16T19:20:30+01:00
</DL>
<p>
<DL >
<dt>seats<dd> An RPC struct describing this game's <a href="seat.html" class=wikipagelink>seat</a>s. Each member represents one seat: the key is its ID, and the value is an array of all the JIDs of the players in that seat.
</DL>
<p>
<DL >
<dt>winners<dd> This game's <a href="winners_list.html" class=wikipagelink>winners list</a>, an array ranking the seats in winning order, with each place-slots represented by a sub-array. Note that if the optional <code>finished</code> flag (see below) is set to false, then the order of this list, while still recorded, has no effect on players' rankings (since the game didn't finish naturally).
</DL>
<p>
<DL >
<dt>game_uri<dd> The URI of this game's <a href="ruleset.html" class=wikipagelink>ruleset</a>.
</DL>
<p>
<DL >
<dt>parlor<dd> The bare JID of the referee's <a href="parlor.html" class=wikipagelink>parlor</a>.
</DL>
<p>
<H3>Optional values</H3>

<p>
<DL >
<dt>start_time<dd> The time at which this game began, expressed in one of the <a href="/web/20070301123245/http://www.w3.org/TR/NOTE-datetime">[W3 standard date and time formats]</a>, e.g. 2005-07-16T19:20:30+01:00
</DL>
<p>
<DL >
<dt>notes<dd> A string, which can contain anything the referee cares to put here.
</DL>
<p>
<DL >
<dt>finished<dd> A boolean that signals whether the game came to a natural conclusion (true), or if the referee ended it early due to <a href="user_departure.html" class=wikipagelink>user departure</a> (false). If this value is <em>not</em> provided on an incoming record, then the bookkeeper will mark it as true. Therefore, when creating new records, it's perfectly OK to only define this (and define it as false) when a game ends abnormally.
</DL>
<p>
<DL >
<dt>history<dd> An arbitrary data object (within the scope of Jabber-RPC data types -- most likely a struct or array) which represents the history of the game. The content of this field is game-specific; it is generated by the referee, and interpreted by <a href="game_history_ui.html" class=wikipagelink>game-specific UI code</a>.
</DL>
<p>
<em>Maybe also have a history-URI and history-URI-version? It is not necessarily true that the format of the history record is tied to the ruleset by which the game was played. I.e., several chess rulesets could share a standard game record format. Or the ruleset of a game could evolve in a way that doesn't affect the game record. Or vice versa.</em>
<p>
<H2>Record sizes</H2>

<p>
The <a href="bookkeeper.html" class=wikipagelink>bookkeeper</a> can (and probably should) set a limit on the size of incoming game records.
<p>
<em>Except that the history field will, in general, be unboundedly large.</em>
<p>
<H2>Implementation notes</H2>

<p>
The format of game records is general enough that only referee implementations need worry about them. In other words, individual game modules needn't worry about these records in their own code. As long as the modules can correctly identify their own ruleset, and generate a <a href="winners_list.html" class=wikipagelink>winners list</a> in the proper format, the game's referee will do the right thing.
</div>